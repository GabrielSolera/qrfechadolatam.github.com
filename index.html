<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR para fechado productos OAK Latam</title>
  <style>
    body {
      background-color: #2f006e;
      font-family: 'Georgia', serif;
      color: white;
      text-align: center;
      margin: 0;
      padding-top: 20px;
    }
    .logo img {
      width: 120px;
      height: auto;
    }
    .banderas img {
      width: 35px;
      height: 35px;
      margin: 0 6px;
      border-radius: 50%;
    }
    h2 {
      font-size: 22px;
      margin: 10px 0 20px;
    }
    form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    label {
      margin-top: 15px;
      font-weight: bold;
    }
    input {
      padding: 10px;
      width: 280px;
      border: none;
      border-radius: 5px;
      background-color: #f5eee0;
      font-weight: bold;
      text-align: center;
    }
    .btn {
      margin: 10px 6px;
      padding: 10px 20px;
      background-color: #e63946;
      color: white;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
    #etiquetas-grid {
      display: grid;
      grid-template-columns: repeat(5, 38mm);
      grid-template-rows: repeat(5, 25mm);
      gap: 3mm 5mm;
      padding: 2mm 4mm;
      box-sizing: border-box;
      margin: 30px auto;
      width: fit-content;
    }
    .etiqueta {
      border: 1px solid #000;
      font-size: 7pt;
      padding: 2mm;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      white-space: pre-line;
      background-color: white;
      color: black;
    }
    .linea {
      display: flex;
      gap: 4px;
    }
    .label {
      font-weight: bold;
      flex-shrink: 0;
    }
    .campo {
      flex-grow: 1;
      border-bottom: 0.5px dotted #000;
      min-width: 30px;
    }
    @media print {
      body * { visibility: hidden; }
      #printArea, #printArea * { visibility: visible; }
      #printArea {
        position: absolute;
        top: 0;
        left: 0;
        width: 210mm;
        height: 297mm;
      }
      @page { size: A4; margin: 0; }
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="Logo_Primary_Macaw_Offwhite (2).png" alt="Logo OAK">
  </div>
  <div class="banderas">
    <img src="cr.jpg" alt="Costa Rica">
    <img src="pa.jpg" alt="PanamÃ¡">
    <img src="gt.png" alt="Guatemala">
    <img src="sv.jpg" alt="El Salvador">
  </div>
  <h2>QR para fechado productos OAK Latam</h2>

  <form id="formulario">
    <label for="producto">Producto:</label>
    <input type="text" id="producto" required>
    <label for="lote">Lote:</label>
    <input type="text" id="lote" required>
    <label for="fechaPrimaria">Fecha primaria:</label>
    <input type="date" id="fechaPrimaria" required>
    <label for="fechaAbierto">Fecha abierto:</label>
    <input type="date" id="fechaAbierto" required>
    <label for="venceAbierto">Vence abierto:</label>
    <input type="date" id="venceAbierto" required>
    <label for="responsable">Responsable:</label>
    <input type="text" id="responsable" required>
    <div>
      <button type="button" class="btn" onclick="agregarEtiqueta()">Siguiente</button>
      <button type="button" class="btn" onclick="window.print()">Imprimir</button>
      <button type="button" class="btn" style="background-color:#6c757d" onclick="limpiarHoja()">Limpiar hoja</button>
    </div>
  </form>

  <div id="printArea">
    <div id="etiquetas-grid"></div>
  </div>

  <script>
    const grid = document.getElementById('etiquetas-grid');
    let etiquetas = [];

    function crearHTML(etiqueta) {
      return `
        <div class="etiqueta">
          <div class="linea"><div class="label">Producto:</div><div class="campo">${etiqueta.producto}</div></div>
          <div class="linea"><div class="label">Lote:</div><div class="campo">${etiqueta.lote}</div></div>
          <div class="linea"><div class="label">Fecha primaria:</div><div class="campo">${etiqueta.fechaPrimaria}</div></div>
          <div class="linea"><div class="label">Fecha abierto:</div><div class="campo">${etiqueta.fechaAbierto}</div></div>
          <div class="linea"><div class="label">Vence abierto:</div><div class="campo">${etiqueta.venceAbierto}</div></div>
          <div class="linea"><div class="label">Responsable:</div><div class="campo">${etiqueta.responsable}</div></div>
        </div>
      `;
    }

    function agregarEtiqueta() {
      if (etiquetas.length >= 25) {
        alert('Ya has llenado las 25 etiquetas.');
        return;
      }

      const nueva = {
        producto: document.getElementById('producto').value,
        lote: document.getElementById('lote').value,
        fechaPrimaria: document.getElementById('fechaPrimaria').value,
        fechaAbierto: document.getElementById('fechaAbierto').value,
        venceAbierto: document.getElementById('venceAbierto').value,
        responsable: document.getElementById('responsable').value
      };

      etiquetas.push(nueva);
      renderizarEtiquetas();
    }

    function limpiarHoja() {
      etiquetas = [];
      grid.innerHTML = '';
    }

    function renderizarEtiquetas() {
      grid.innerHTML = '';
      etiquetas.forEach(etiqueta => {
        grid.innerHTML += crearHTML(etiqueta);
      });
    }
  </script>
</body>
</html>
